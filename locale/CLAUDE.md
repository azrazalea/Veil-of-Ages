# /locale

## Purpose

Contains localization files for Veil of Ages. Godot's `TranslationServer` loads these PO files at runtime to provide translated strings throughout the game.

## Files

### messages.pot
PO template file generated by `tools/generate_pot.py`. Contains all translatable string keys extracted from JSON data definitions (items, skills, beings, buildings, etc.) and any manually-added UI/activity keys. This is the source of truth for what keys exist.

### en.po
English translation file. Maps translation keys to their English text. This is the primary (and currently only) locale. New locales follow the same format (e.g., `fr.po`, `de.po`).

## Translation Key Conventions

Keys follow the pattern `category.subcategory.IDENTIFIER`:

| Category | Example Key | Source |
|----------|-------------|--------|
| `time` | `time.month.SEEDWEAVE` | Calendar month names |
| `need` | `need.hunger.NAME` | Entity need display names |
| `ui` | `ui.hud.PAUSE` | HUD and menu strings |
| `dialogue` | `dialogue.greeting.VILLAGER` | Dialogue tree text |
| `activity` | `activity.WORK_FIELD` | Activity display names |
| `item` | `item.bread.NAME` | Item definitions |
| `skill` | `skill.farming.NAME` | Skill definitions |
| `being` | `being.human_townsfolk.NAME` | Being definitions |

Each definition typically has both a `.NAME` and `.DESCRIPTION` key.

## Format Strings

Translated strings may contain `{0}`, `{1}`, etc. placeholders for runtime formatting. Use `L.Fmt()` or `L.TrFmt()` from `VeilOfAges.Core.Lib.L` to format these safely with cached `CompositeFormat`.

## Plural Support

PO files support plural forms via `msgid_plural`. Use `L.TrN(singularKey, pluralKey, n)` for count-dependent translations.

```po
msgid "item.bread.COUNT_ONE"
msgid_plural "item.bread.COUNT_OTHER"
msgstr[0] "{0} loaf of bread"
msgstr[1] "{0} loaves of bread"
```

## Generating the POT File

Run `tools/generate_pot.py` to regenerate `messages.pot` from JSON data files. This extracts keys for items, skills, beings, and other data-driven definitions. After regenerating, merge changes into locale-specific `.po` files.

## Dependencies

### Depended On By
- `VeilOfAges.Core.Lib.L` - Static localization helper reads translations via TranslationServer
- Godot Node classes using built-in `Tr()` method
- All UI, dialogue, and display systems

### Depends On
- `tools/generate_pot.py` - POT generation script
- JSON definition files in `resources/` - Source of data-driven keys
